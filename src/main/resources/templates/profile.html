<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments/head"></head>

<body>

<header th:replace="fragments/nav"></header>

<main class="p-5 align-content-center" >

    <div class="row tm-mt-big justify-content-center">
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
            <div th:object="${user}" class="bg-white tm-block" style="color: black" id="user">
                <div class="row justify-content-center text-center">
                    <div class="col-12">
                        <h2 class="tm-block-title d-inline-block" th:text="|*{username} profile|"></h2>
                    </div>
                </div>


                <div class="row mt-4">
                    <div class="col-xl-7 col-lg-7 col-md-12" style="color: black" >
                        <div>
                            <label class="col-xl-4 col-lg-4 col-md-4 col-sm-5 col-form-label">Username:</label>
                            <span th:text="|*{username}|"></span>
                        </div>

                        <div>
                            <label class="col-xl-4 col-lg-4 col-md-4 col-sm-5 col-form-label">Registered on</label>
                            <span th:text="|*{registeredOn}|"></span>
                        </div>

                        <div>
                            <label class="col-xl-4 col-lg-4 col-md-4 col-sm-5 col-form-label">Full Name:</label>
                            <span th:text="|*{fullName}|"></span>
                        </div>

                        <div>
                            <label class="col-xl-4 col-lg-4 col-md-4 col-sm-5 col-form-label">Roles:</label>
                                <span th:each="r, iterStat : ${userRoles}"
                                      th:text="${!iterStat.last} ? ${r} + ', ': ${r}"></span>
                        </div>

                        <div>
                            <label class="col-xl-4 col-lg-4 col-md-4 col-sm-5 col-form-label">Email:</label>
                            <span th:text="|*{email}|"></span>
                        </div>

                        <div>
                            <label  class="col-xl-4 col-lg-4 col-md-4 col-sm-5 col-form-label">Added Dramas:</label>
                                <a style="color: orange" th:href="@{/users/my-dramas}"  th:text="|${userDramas.size()}|"></a>

                        </div>

                        <div>
                            <label class="col-xl-4 col-lg-4 col-md-4 col-sm-5 col-form-label">Added Movies:</label>
                            <a style="color: orange" th:href="@{/users/my-movies}" th:text="|${userMovies.size()}|"></a>
                        </div>

                    </div>


                    <form
                            th:action="@{/users/add-picture}"
                            th:method="POST"
                            id="add-article-form"
                            class="form w-25 mx-auto"
                            enctype="multipart/form-data">

                        <img th:src="*{imageUrl}" alt="User picture" width="400px">
                        <br>
                        <br>
                        <div class="row-cols-10" style="color: black" >
                            <label for="inputImage" class="text-dark">Change profile picture</label>
                            <input type="file" id="inputImage" name="imageUrl" required="required">
                        </div>
                        <hr>
                        <div class="button-holder d-flex justify-content-center">
                            <button type="submit" class="btn btn-info">Change picture</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


</main>
<footer th:replace="fragments/footer"></footer>

</body>

</html>